function renderStatement(e){$("#chat").append('<div class="row"><div class="small-10 medium-7 columns"><div class="call-bubble">'+e+"</div></div></div>")}function showTyping(){$("#chat").append('<div class="row" id="typing"><div class="small-10 medium-7 columns"><div class="call-bubble"><img src="images/ellipsis.gif" width="24"></img></div></div></div>')}function hideTyping(){$("#typing").remove()}function clearChat(){$("#chat").empty()}function clearFooter(){$("#choices").empty(),$("#input-container").empty()}function startConversation(e){clearFooter(),clearChat(),$.getScript("js/"+e,function(){showStatement("1")})}function showStatement(e){var n=conversation[e];"sideeffect"in n&&$.type("function"===n.sideeffect)&&n.sideeffect(context);var t;"array"===$.type(n.statement)?t=n.statement:"string"===$.type(n.statement)?t=[n.statement]:"function"===$.type(n.statement)&&(t=n.statement(context)),async.eachSeries(t,function(e,n){showTyping();var t=e.length/3*30*(Math.floor(5*Math.random())+1);DEBUG&&(t=0),setTimeout(function(){hideTyping(),renderStatement(e),$("body").scrollTop(1e10),n()},t)},function(e){if("options"in n){$("#input-row").hide(),$("#choice-buttons").show();var t=n.options;if(t.length>0){for(var i=0;i<t.length;i++){var s=t[i],c=$("<li/>");if(null===s.consequence)var o=null,a="disabled";else var o=function(e){showResponse(e)}.bind(this,s),a="";var l=$("<a/>",{text:s.choice,"class":"button "+a,click:o}).appendTo(c);c.appendTo("#choices")}$("#choices").removeClass("even-1 even-2 even-3 even-4 even-5 even-6 even-7 even-8"),$("#choices").addClass("even-"+t.length),$("#chat-row").removeClass("choices-1 choices-2 choices-3 choices-4 choices-5 choices-6 choices-7 choices-8"),$("#chat-row").addClass("choices-"+t.length)}}else if("input"in n){$("#input-row").show(),$("#choice-buttons").hide();var s=n.input,r=$("<div/>",{"class":"medium-10 columns"}),d=$("<form/>",{submit:function(e){return $("input").val().length>0?showResponse(s):alert("Vul alstjeblieft je naam in!"),!1}.bind(this,s)}).appendTo(r),u=$("<input/>",{"class":"radius",type:"text",placeholder:"Bericht",name:s.name}).appendTo(d);async.nextTick(function(){$("input").focus()}),r.appendTo("#input-container");var p=$("<div/>",{"class":"medium-2 columns"}),l=$("<a/>",{text:"Verzenden","class":"button postfix radius",click:function(e){$("input").val().length>0?showResponse(e):alert("Vul alstjeblieft je naam in!")}.bind(this,s)}).appendTo(p);p.appendTo("#input-container")}})}function showResponse(e){var n="";"name"in e?(context[e.name]=$("input").val(),n=context[e.name]):n=e.choice,clearFooter(),$("#chat").append('<div class="row clearfix"><div class="small-10 medium-7 columns right"><div class="response-bubble">'+n+"</div></div></div>"),"consequence"in e&&showStatement(e.consequence)}var DEBUG=!1,context={};$(function(){startConversation("conversation.js")});